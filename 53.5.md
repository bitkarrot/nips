NIP-53 addendum
======

Rooms or Virtual Spaces
-----------------------

`draft` `optional`

Service providers want to offer live activities to the Nostr network in such a way that participants can easily log and query by clients. This NIP describes a general framework to advertise the involvement of pubkeys in such live virtual spaces.

## Concepts

### Live Room

A special event with `kind:30312` "Live Room" is defined as an _addressable event_ of public `p` tags. Each `p` tag SHOULD have a **displayable** marker name for the current role (e.g. `Host`, `Speaker`, `Participant`) of the user in the virtual space and the relay information MAY be empty. 
This event may be constantly updated as participants join and leave the Room.

For example:

```jsonc
{
  "kind": 30312,
  "tags": [
    ["d", "<unique identifier>"],
    ["room", "<name of the room or virtual space>"],
    ["summary", "<description>"],
    ["image", "<preview image url>"],
    ["t", "hashtag"]
    ["server", "<url>"], // url to access the room or server api endpoint to connect
    ["recording", "<url>"], // used to place the edited video once activity is ended
    ["status", "<open, closed>"],
    ["current_participants", "<number>"],
    ["total_participants", "<number>"],
    ["events", " list of related events"], // a list of related events, comma separated
    ["p", "91cf9..4e5ca", "wss://provider1.com/", "Host", "<proof>"],
    ["p", "14aeb..8dad4", "wss://provider2.com/nostr", "Speaker"],
    ["p", "612ae..e610f", "ws://provider3.com/ws", "Participant"],
    ["relays", "wss://one.com", "wss://two.com", /*...*/]
  ],
  "content": "",
  // other fields...
}
```


A distinct `d` tag should be used for each activity. All other tags are optional.
Providers SHOULD keep the participant list small (e.g. under 1000 users) and, when limits are reached,
Providers SHOULD select which participants get named in the event. Clients should not expect a comprehensive list. Once the activity ends, 
the event can be deleted or updated to summarize the activity and provide async content (e.g. recording of the event).
Clients are expected to subscribe to `kind:30312` events in general or for given follow lists and statuses.
Clients MAY display participants' roles in activities as well as access points to join the activity.

Live Activity management clients are expected to constantly update `kind:30312` during the event.
Clients MAY choose to consider `status=live` events after 1hr without any update as `ended`. The `starts` and `ends` 
timestamp SHOULD be updated when the status changes to and from `live`

The activity MUST be linked to using the [NIP-19](19.md) `nspace` code along with the `a` tag.

### Proof of Agreement to Participate

Event owners can add proof as the 5th term in each `p` tag to clarify the participant's 
agreement in joining the event. The proof is a signed SHA256 of the complete `a` Tag of 
the event (`kind:pubkey:dTag`) by each `p`'s private key, encoded in hex.

Clients MAY only display participants if the proof is available or MAY display
participants as "invited" if the proof is not available.

This feature is important to avoid malicious event owners adding large account holders
to the event, without their knowledge, to lure their followers into the malicious owner's trap.

## Use Cases

Common use cases include interactive meeting rooms/workshops, gaming rooms, Virtual Reality/Augmented Reality, 
or conference event spaces, such as [hivetalk](https://hivetalk.org) or [nostr nests](https://nostrnests.com).

## Example

### Live Room

```json
{
  "id": "57f28dbc264990e2c61e80a883862f7c114019804208b14da0bff81371e484d2",
  "pubkey": "1597246ac22f7d1375041054f2a4986bd971d8d196d7997e48973263ac9879ec",
  "created_at": 1687182672,
  "kind": 30312,
  "tags": [
    ["d", "3oisjfasdrwer"],
    ["room", "hive room"],
    ["summary", "where nostr folks talk about the latest buzz"],
    ["server", "<url>"],
    ["status", "open"],
    ["t", "conference"],
    ["t", "hivetalk"],
    ["image", "https://i.imgur.com/CaKq6Mt.png"]
  ],
  "content": "",
  "sig": "5bc7a60f5688effa5287244a24768cbe0dcd854436090abc3bef172f7f5db1410af4277508dbafc4f70a754a891c90ce3b966a7bc47e7c1eb71ff57640f3d389"
}
```

